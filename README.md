![image](https://user-images.githubusercontent.com/62659009/107788929-deebcb80-6d48-11eb-89c4-f7e147eb17bc.png)

[View live site](https://our-traditions.herokuapp.com/)

# Our Traditions

<span id="index"></span>

## Index

- <a href="#overview">Project Overview</a>
- <a href="#ux">UX</a>
- <a href="#userstories">User stories</a>
- <a href="#wireframes">Wireframes</a>
- <a href="#design">Design</a>
- <a href="#designelements">Design elements</a>
- <a href="#colours">Colours</a>
- <a href="#database">Database design</a>
- <a href="#features">Features</a>
- <a href="#existingfeatures">Existing features</a>
- <a href="#futurefeatures">Features left to implement</a>
- <a href="#technologies">Technologies used</a>
- <a href="/TESTING.md">Testing</a>
- <a href="#bugs">Bug Fixes</a>
- <a href="#deployment">Deployment</a>
- <a href="#">Credits</a>
- <a href="#">Contents</a>
- <a href="#">Media</a>
- <a href="#">Acknowledgements</a>
- <a href="#"></a>




<span id="overview"></span>

## Overview 

One or two paragraphs providing an overview of your project.

Essentially, this part is your sales pitch.

Site owner goals

<span id="ux"></span>

## UX

<div class="right"><a href="#index"><button class="btn-small">Back to index &#8593;</button></a></div>

                This is a code snippet


<span id="userstories"></span>

### User stories

As a user I want to...

- explore traditions from around the world
- search traditions to see if any are similar to traditions I share with my family, friends, colleagues or other group
- add traditions I share with my family, friends, colleagues or other group

User goals
Site owner goals

<span id="wireframes"></span>

### Wireframes

[See my wireframes here](wireframes+mockups/wireframes.pdf)

data schema? Sitemap? 

Use this section to provide insight into your UX process, focusing on who this website is for, what it is that they want to achieve and how your project is the best way to help them achieve these things.

In particular, as part of this section we recommend that you provide a list of User Stories, with the following general structure:
- As a user type, I want to perform an action, so that I can achieve a goal.

This section is also where you would share links to any wireframes, mockups, diagrams etc. that you created as part of the design process. These files should themselves either be included as a pdf file in the project itself (in an separate directory), or just hosted elsewhere online and can be in any format that is viewable inside the browser.

<span id="design"></span>

## Design 

How I came to the decision of dark colours and 

<span id="designelements"></span>

### Design elements

- Cards - I chose to make each tradition card span the full width of the screen on any device instead of four thirds of the page width on desktop (as I had originally planned). My main reason for this is that as users create the content there will more often than not be a number of cards that is not divisable by 3 and this would make the design look uneven if the layout broke the content into three quarters. 
- For my logo text I have used a gradient background and I wanted to make sure this would be compatable in all browsers. On researching this I found the only browser that does not support the background colour for text is Internet Explorer, [see documentation here.](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-text-fill-color) Therefore I have added a fallback color for that browser.

<span id="colours"></span>

### Colours

I chose a warm colour palette to elicit feelings of warmth and comfort. When I decided on the colours I was imagining telling stories around the camp fire, which is one of the earliest traditions I can think of. The following colours remind me of fire and warmth:

[See colour accessibility here](wireframes+mockups/colour-accessibility.pdf)colour-accessibility.pdf

#D2430F

Accessibility:

White text on #D2430F background on .orange-button meets 

### Fonts
?? (required?)

<span id="database"></span>

## Database design 

I chose to limit what users can add to the site to their traditions. There is no way to add new countries because I wanted to make sure that the list remained accurate. There is also no way to add new groups or categories as I wanted to keep those lists concise and I believe they cover all groups/categories needed.

<span id="collections"></span>
The database is called 'ourTraditions' and contains the following collections:

### Traditions

|**Key**|**Type**|**Description**|
|:-----|:-----|:-----|
|_id|ObjectId|Auto-generated by MongoDB when a new tradition is added.|
|tradition_name|string|Name the user chooses for their tradition, must be between 3-50 characters.|
|category_name|string|Category user chooses, limited by list from categories collection.|
|group_name|string|Group user chooses, limited by list from group collection.|
|country|string|Country user chooses, limited by list from country collection.|
|tradition_description|string|Description that the user adds, must be between 10-300 characters.|
|created_by|string|Group user chooses, limited by list from group collection.|

### Categories

|**Key**|**Type**|**Description**|
|:-----|:-----|:-----|
|_id|ObjectId|Auto-generated by MongoDB when categories were added.|
|category_name|string|Pre-defined in development and cannot be changed.|

### Countries

|**Key**|**Type**|**Description**|
|:-----|:-----|:-----|
|_id|ObjectId|Auto-generated by MongoDB when countries were added.|
|country_name|string|Pre-defined in development and cannot be changed.|

### Groups

|**Key**|**Type**|**Description**|
|:-----|:-----|:-----|
|_id|ObjectId|Auto-generated by MongoDB when groups were added.|
|group_name|string|Pre-defined in development and cannot be changed.|

### Users

|**Key**|**Type**|**Description**|
|:-----|:-----|:-----|
|_id|ObjectId|Auto-generated when a new user registers on the site.|
|username|string|Name the user chooses when they register.|
|password|string|Hashed password.|


<span id="features"></span>

## Features

In this section, you should go over the different parts of your project, and describe each in a sentence or so.

<span id="existingfeatures"></span>

### Existing Features

1. Register - allows users register so that they can create content and update or delete content they have created.

2. Log in - allows users who have already registered to log in to the site and manage the traditions they have added. (Also allows them to vote on other traditions)

3. Add tradition - allows logged in users to add new traditions

4.  File upload - allows logged in users to add images to illustrate their traditions by uploading an image. The uploaded image is stored on Amazon AWS and the link retrieved and added to the image element.

5.  Choose an image - allows users to choose from a library of available images already uploaded and available on the site, in cases where they do not have their own image to upload. Only images relevant to teh category the user has chosen will show as available in order to provide the most relevant choices to the user.

6. Edit - Allows a logged in user to edit any of the details of a tradition she has created by clicking the 'Edit' button on the tradition card and then changing the details.

7. **Country field** allows users to choose which country they are in when adding a tradition. This will allow users to see which traditions exist in each country.

7. **The delete feature** allows a logged in user to delete any of the traditions she has created by clicking the 'Delete' button on the tradition card. When the 'Delete' button the tradition is not deleted immediately but a modal pops up asking the user to confirm that they wish to delete it. Only once they have confirmed they want to delete the tradition it is deleted.

8. **The read more button on card** reveals the full description of the tradition when the user clicks the 'Read more' link. If the description overflows the height of the card a scroll bar will be visible to allow the user to scroll through the content.

9. **The profile page** allows logged in users to see the traditions they have added and manage them by editing or deleting.

- ...allows users X to achieve Y, by having them fill out Z

For some/all of your features, you may choose to reference the specific project files that implement them, although this is entirely optional.

In addition, you may also use this section to discuss plans for additional features to be implemented in the future:

<span id="futurefeatures"></span>

### Features Left to Implement
- Voting
- Pagination 

<span id="technologies"></span>

## Technologies Used

In this section, you should mention all of the languages, frameworks, libraries, and any other tools that you have used to construct this project. For each, provide its name, a link to its official site and a short sentence of why it was used.

- Pillow
- boto3
- [WTForms]('https://flask-wtf.readthedocs.io/en/stable/index.html') - used for checking onKeyUp events


- [JQuery](https://jquery.com)
    - The project uses **JQuery** to simplify DOM manipulation.
- Amazon S3 - for hosting images uploaded to the site by users


## Testing

For testing please see my testing page here: <a href="/TESTING.md">Testing</a>.

In this section, you need to convince the assessor that you have conducted enough testing to legitimately believe that the site works well. Essentially, in this part you will want to go over all of your user stories from the UX section and ensure that they all work as intended, with the project providing an easy and straightforward way for the users to achieve their goals.

Whenever it is feasible, prefer to automate your tests, and if you've done so, provide a brief explanation of your approach, link to the test file(s) and explain how to run them.

For any scenarios that have not been automated, test the user stories manually and provide as much detail as is relevant. A particularly useful form for describing your testing process is via scenarios, such as:

1. Contact form:
    1. Go to the "Contact Us" page
    2. Try to submit the empty form and verify that an error message about the required fields appears
    3. Try to submit the form with an invalid email address and verify that a relevant error message appears
    4. Try to submit the form with all inputs valid and verify that a success message appears.

In addition, you should mention in this section how your project looks and works on different browsers and screen sizes.

You should also mention in this section any interesting bugs or problems you discovered during your testing, even if you haven't addressed them yet.

If this section grows too long, you may want to split it off into a separate file and link to it from here.


<span id="bugs"></span>

### Bug fixes

- Add tradition form select field validation - the Materialize select field does not show an error when left blank, this is a known bug that the validation does not work. I fixed this with help from the Tasks Manager project in this course.
- The materialize class adds a white dot under the form. This is fixed by setting it as 'display: none'
- The valid_images() function should check the file type and not upload the file if it is not one of the allowed types. It should then not allow the upload, however this is currently not written to handle this. [[[need to expand on this]]]
- Select field on mobile: on mobile Materialize bug shows a down arrow on select fields for the validate message. [Fixed this with help from the Stackexchange resource here](https://stackoverflow.com/questions/52850091/materialize-select-and-dropdown-touch-event-selecting-wrong-item/52851046#52851046) 
- Tradition titles: Jinja does not have a sentence case function, only capitalize() and upper(). I wanted to make sure the tradition titles would appear in sentence case if added that way, to allow for proper nouns. I used Python's string manipulation syntax to achieve this. [I found this guide helpful.](https://shubhamjain.co/til/capitalizing-first-letter-in-jinja/)

<span id="deployment"></span>

## Deployment

This section should describe the process you went through to deploy the project to a hosting platform (e.g. GitHub Pages or Heroku).



**For MongoDB:**

- Use SCRAM method to create a username and password
- Make sure to not use any special characters in your password 
- Make sure your user priviledges are set to 'Read and write to the database'.
- Click 'Add user'
- In the 'Network access' tab, click 'Add IP address' and then select 'Allow access from anywhere' because you will be accessing the DB from your IDE and Heroku. OR, for added security, restrict this to the IP address of your hosts.
- Once your cluster has been provisioned click 'collections' and then 'Add My Own Data'.
- Add your database name and the name of your first collection. 
- Once your database is created you can add the rest of the collections, [see all the collections you will need here](#collections). 
- Access your MONGO_URI for your env.py file and Heroku config vars by clicking 'Connect' (in your cluster), then select 'Connect your application', choose Python and the correct version and then copy your connection string
- Back in your IDE add this to your env.py file and replace `<password>` with your password and `<dbname>` with your database name.

**In Heroku**

1. In Heroku add your config vars (in the 'settings' tab > click 'Reveal config vars')

|**Key**|**Value**|
|IP|`0.0.0.0`|   
|PORT|`5000`|
|SECRET_KEY| `<your secret key from MongoDB>`|
|MONGO_URI|`<your MongoDB URI>`|
|MONGO_DBNAME|| `<your database name>`
|S3_BUCKET|`<your bucket name>`|
|S3_KEY|`<your S3 bucket key>`|
|S3_SECRET_ACCESS_KEY|`<your S3 secret key>`|
|S3_LOCATION|`<your S3 location URL>`|

2. Add your env.py file to your .gitignore file to ensure none of your secret keys are pushed to your repository. 

In particular, you should provide all details of the differences between the deployed version and the development version, if any, including:
- Different values for environment variables (Heroku Config Vars)?
- Different configuration files?
- Separate git branch?

In addition, if it is not obvious, you should also describe how to run your code locally.


....

## Setting up your Amazon S3 account to host uploads

I used Amazon S3 to allow users to upload images to the site to accompany their traditions. This is how you would set it up:

1. Create an Amazon AWS account
2. Create a bucket 
3. Under your name (top right of the management console) click 'My security credentials' Open 'Access keys...'
3. Click 'Create New Access Key'.
4. Save the file to your computer
5. From the main menu select 'IAM' and then 'Create new user'
5. In your app install boto3: <code>pip install flask boto3</code>

<span id="credits"></span>

## Credits

- [This tutorial helped me build an image uploader](https://www.youtube.com/watch?v=6WruncSoCdI)
- [Documentation for how to create an Amazon AWS policy](https://docs.aws.amazon.com/AmazonS3/latest/dev/example-policies-s3.html#iam-policy-ex4)
- [To set up my Amazon account I used this tutorial.](https://www.youtube.com/watch?v=v33Kl-Kx30o)
- [For help with Python's string manipulation syntax in Jinja I used this guide.](https://shubhamjain.co/til/capitalizing-first-letter-in-jinja/)

<span id="content"></span>

### Content
- The text for section Y was copied from the [Wikipedia article Z](https://en.wikipedia.org/wiki/Z)

<span id="media"></span>

### Media
- The background image for this site is from [Toptal](https://www.toptal.com/) 
- The photo used on this site was obtained from [Unsplash](https://unsplash.com/)
- For testing purposes I have uploaded a few images to the tradition cards, these are also from [Unsplash](https://unsplash.com/)
- All other photos on the site are uploaded by users.


<span id="acknowledgements"></span>

### Acknowledgements

- I received inspiration for this project from my team at Hexagon when we were discussing the different traditions we all celebrate over Christmas and New Year.
- Thank you to the Code Institute Tutors for help with a snagging issue
- Thank you to Ed Bradley and Chris Palmer for their invaluable help through some of my coding questions
- Thank you to my mentor Dick Vlaanderen for guidance on my project
